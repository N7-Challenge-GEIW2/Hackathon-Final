var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var p=(e,t)=>{for(var o in t)s(e,o,{get:t[o],enumerable:!0})},g=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of u(t))!l.call(e,r)&&r!==o&&s(e,r,{get:()=>t[r],enumerable:!(n=d(t,r))||n.enumerable});return e};var b=e=>g(s({},"__esModule",{value:!0}),e);var y={};p(y,{getPort:()=>c,listen:()=>x,removePort:()=>m});module.exports=b(y);var h=globalThis.browser?.tabs||globalThis.chrome?.tabs,i=()=>{let e=globalThis.browser?.runtime||globalThis.chrome?.runtime;if(!e)throw new Error("Extension runtime is not available");return e};var a=new Map,c=e=>{let t=a.get(e);if(t)return t;let o=i().connect({name:e});return a.set(e,o),o},m=e=>{a.delete(e)},x=(e,t,o)=>{let n=c(e);function r(){m(e),o?.()}return n.onMessage.addListener(t),n.onDisconnect.addListener(r),{port:n,disconnect:()=>{n.onMessage.removeListener(t),n.onDisconnect.removeListener(r)}}};0&&(module.exports={getPort,listen,removePort});
