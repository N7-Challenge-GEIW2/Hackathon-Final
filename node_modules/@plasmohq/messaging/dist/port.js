var m=globalThis.browser?.tabs||globalThis.chrome?.tabs,a=()=>{let e=globalThis.browser?.runtime||globalThis.chrome?.runtime;if(!e)throw new Error("Extension runtime is not available");return e};var r=new Map,i=e=>{let t=r.get(e);if(t)return t;let n=a().connect({name:e});return r.set(e,n),n},c=e=>{r.delete(e)},l=(e,t,n)=>{let o=i(e);function s(){c(e),n?.()}return o.onMessage.addListener(t),o.onDisconnect.addListener(s),{port:o,disconnect:()=>{o.onMessage.removeListener(t),o.onDisconnect.removeListener(s)}}};export{i as getPort,l as listen,c as removePort};
